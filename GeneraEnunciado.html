<!DOCTYPE html>
<html>
<head>
    <title>Generar texto con OpenAI</title>
</head>
<body>
    <form method="post" action="">
        <label for="texto_ejemplo">Ingrese el texto para generar algo:</label><br>
        <textarea id="texto_ejemplo" name="texto_ejemplo" rows="4" cols="50"></textarea><br><br>
        <input type="submit" value="Generar">
    </form>

    <?php
    // Verificar si se ha enviado el formulario
    if ($_SERVER["REQUEST_METHOD"] == "POST") {
        // Obtener el texto del formulario
        $texto_para_generar = $_POST['texto_ejemplo'];

        // Función para hacer la solicitud a la API de OpenAI
        function genera_algo($texto_para_generar) {
            $openai_api_key = 'TU_API_KEY'; // Reemplaza 'TU_API_KEY' con tu clave de API de OpenAI
            $url = 'https://api.openai.com/v1/engines/text-davinci-003/completions';

            $data = array(
                'prompt' => $texto_para_generar,
                'max_tokens' => 100, // La cantidad de tokens máxima para generar
                'temperature' => 0.5, // El nivel de creatividad o aleatoriedad del texto generado
                'n' => 1 // Número de respuestas a generar
            );

            $headers = array(
                'Content-Type: application/json',
                'Authorization: Bearer ' . $openai_api_key
            );

            $ch = curl_init($url);
            curl_setopt($ch, CURLOPT_POST, 1);
            curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
            curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

            $response = curl_exec($ch);
            curl_close($ch);

            return $response;
        }

        // Ejemplo de llamada a la función "genera_algo" con el texto del formulario
        $texto_generado = genera_algo($texto_para_generar);

        // Imprime el texto generado como JSON
        echo "<pre>$texto_generado</pre>";
    }
    ?>
</body>
</html>